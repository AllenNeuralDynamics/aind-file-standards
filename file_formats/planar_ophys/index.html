<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation for the Allen Institute for Neural Dynamics File Standards"><meta name=author content="Allen Institute for Neural Dynamics and Contributors"><link href=../nwb/ rel=prev><link rel=icon href=../../icon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.16"><title>Planar Ophys - AIND File Standards</title><link rel=stylesheet href=../../assets/stylesheets/main.7e37652d.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=black> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#standards-on-planar-optical-physiology-acquisition class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="AIND File Standards" class="md-header__button md-logo" aria-label="AIND File Standards" data-md-component=logo> <img src=../../logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> AIND File Standards </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Planar Ophys </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=black aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=white aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/AllenNeuralDynamics/aind-file-standards title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> aind-file-standards </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Index </a> </li> <li class=md-tabs__item> <a href=../../core/contributing/ class=md-tabs__link> Core </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../behavior_videos/ class=md-tabs__link> File Formats </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="AIND File Standards" class="md-nav__button md-logo" aria-label="AIND File Standards" data-md-component=logo> <img src=../../logo.svg alt=logo> </a> AIND File Standards </label> <div class=md-nav__source> <a href=https://github.com/AllenNeuralDynamics/aind-file-standards title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> aind-file-standards </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Index </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Core </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../core/contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=../../core/core-standards/ class=md-nav__link> <span class=md-ellipsis> Core Standards </span> </a> </li> <li class=md-nav__item> <a href=../../core/template/ class=md-nav__link> <span class=md-ellipsis> Template </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> File Formats </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> File Formats </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../behavior_videos/ class=md-nav__link> <span class=md-ellipsis> Behavior Videos </span> </a> </li> <li class=md-nav__item> <a href=../ecephys/ class=md-nav__link> <span class=md-ellipsis> Ecephys </span> </a> </li> <li class=md-nav__item> <a href=../fip/ class=md-nav__link> <span class=md-ellipsis> Fip </span> </a> </li> <li class=md-nav__item> <a href=../harp/ class=md-nav__link> <span class=md-ellipsis> Harp </span> </a> </li> <li class=md-nav__item> <a href=../nwb/ class=md-nav__link> <span class=md-ellipsis> Nwb </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Planar Ophys </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Planar Ophys </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Page contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Page contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#acquisitionraw-data-format class=md-nav__link> <span class=md-ellipsis> Acquisition/Raw Data Format </span> </a> <nav class=md-nav aria-label="Acquisition/Raw Data Format"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#application-notes class=md-nav__link> <span class=md-ellipsis> Application notes </span> </a> </li> <li class=md-nav__item> <a href=#relationship-to-aind-data-schema-session class=md-nav__link> <span class=md-ellipsis> Relationship to aind-data-schema Session </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#primary-data-format class=md-nav__link> <span class=md-ellipsis> Primary Data Format </span> </a> <nav class=md-nav aria-label="Primary Data Format"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#application-notes_1 class=md-nav__link> <span class=md-ellipsis> Application notes </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#file-quality-assurance class=md-nav__link> <span class=md-ellipsis> File Quality Assurance </span> </a> </li> <li class=md-nav__item> <a href=#vocabulary class=md-nav__link> <span class=md-ellipsis> Vocabulary </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Page contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Page contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#acquisitionraw-data-format class=md-nav__link> <span class=md-ellipsis> Acquisition/Raw Data Format </span> </a> <nav class=md-nav aria-label="Acquisition/Raw Data Format"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#application-notes class=md-nav__link> <span class=md-ellipsis> Application notes </span> </a> </li> <li class=md-nav__item> <a href=#relationship-to-aind-data-schema-session class=md-nav__link> <span class=md-ellipsis> Relationship to aind-data-schema Session </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#primary-data-format class=md-nav__link> <span class=md-ellipsis> Primary Data Format </span> </a> <nav class=md-nav aria-label="Primary Data Format"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#application-notes_1 class=md-nav__link> <span class=md-ellipsis> Application notes </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#file-quality-assurance class=md-nav__link> <span class=md-ellipsis> File Quality Assurance </span> </a> </li> <li class=md-nav__item> <a href=#vocabulary class=md-nav__link> <span class=md-ellipsis> Vocabulary </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=standards-on-planar-optical-physiology-acquisition>Standards on planar optical physiology acquisition<a class=headerlink href=#standards-on-planar-optical-physiology-acquisition title="Permanent link">&para;</a></h1> <p>Version: 0.0.1</p> <h2 id=acquisitionraw-data-format>Acquisition/Raw Data Format<a class=headerlink href=#acquisitionraw-data-format title="Permanent link">&para;</a></h2> <p>Planar optical physiology data should be saved to a directory called pophys. Files should be in raw TIFF format (v4) with optional, related images (surface, depth, local and cortical stacks) and application metadata in the same directory. </p> <p><strong>Single Plane</strong></p> <p>Trials are 2-photon movies captured as a series of TIFF files with a maximum size of 2000 frames per TIFF.</p> <p>Three experimental epochs are collected during a session. Each can contain a variety of trials. Experimental epochs are called: Spontaneous, Single Neuron BCI Conditioning and 2p Photostimulation.</p> <p>A local TIFF stack is acquired above and below (40um) the ROI for motion correction and for locating the FOV on successive days.</p> <p>.mat files saved for each Single Neuron BCI Conditioning trial and contains threshold parameters for BCI mapping.</p> <p>Scan Image outputs a file detecting the frame shift of the FOV to motion correct ROI (.csv).</p> <p>Scan Image saves the power of laser used in 2p photostimulation (.stim file); analog voltage signal sampled at 9kHz.</p> <p>Full activity traces for the duration of the BCI experiment of ROI of the conditioned neurons and ~30 other neurons considered as candidates for the conditioned neuron (.csv).</p> <div class=highlight><pre><span></span><code>ðŸ“¦pophys
 â”£ ðŸ“œspont_000n.tiff
 â”£ ðŸ“œneuron_000n.tiff
 â”£ ðŸ“œphotostim_000n.tiff
 â”£ ðŸ“œlocal.tiff
 â”£ ðŸ“œneuron.mat
 â”£ ðŸ“œcorrection.csv
 â”£ ðŸ“œactivity.csv
 â”£ ðŸ“œphotostim_power.stim
</code></pre></div> <p><strong>Multiplane</strong></p> <p>Epi-fluorescence surface vasuculature image is acquired for session-to-session matching and saved in TIFF format.</p> <p>2-photon surface image stored as a TIFF for each ROI where the image contains interleaved images of the 2p ROI surface acquired in one channel. Each ROI will be on it's TIFF page. 16 frames per ROI (See Figure 1).</p> <p>2-photon depth image are stored TIFF for each plane. Images are acquired in 2 channels and each plane will be on it's own page in the TIFF stack where the orders are P1, C1, P1, C2 (See Figure 1). There are 16 frames per plane (2x longer than the surface image)</p> <p>There is one movie file for a stimulus presented during a session. The timeseries image is acquired as a TIFF in the same order as the depth image (See Figure 1). The frame rate of acquisition will vary based on how many paired planes are being imaged.</p> <p>Local z-stacks are in TIFF formats and are acquired by pairs. The number of z-stacks equals the number of paired planes. The contents are interleaved and acquired in both channels (P1, C1, P1, C2).</p> <p>Cortical stack for each ROI and they are acquired in one channel. </p> <p>A fullfield TIFF file is used for registration of the ROI, surface 2p files for visual reistration. The fullfield scans the entire FOV. </p> <p>ROI files are stored with all images acquired by Scan Image and contain cordinates for each ROI and scanfield for each non-stack TIFF files (surface, depth, timeseries and fullfield). The ROI files are loaded by users for day-to-day targeting to help operators know the location of each ROI.</p> <div class=highlight><pre><span></span><code>ðŸ“¦pophys
 â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_averaged_depth.tiff
 â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_averaged_surface.tiff
 â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_fullfield.roi
 â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_fullfield.tiff
 â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_local_z_stack0.tiff
 â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_surface.roi
 â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_timeseries.roi
 â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_timeseries.tiff
 â”— ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_vasculature.tif
</code></pre></div> <p><img alt="alt text" src=../resources/MesoscopeTIFFConstruction.png> <em>Figure 1</em></p> <h3 id=application-notes>Application notes<a class=headerlink href=#application-notes title="Permanent link">&para;</a></h3> <p>ScanImage major version &gt;= 2020</p> <h3 id=relationship-to-aind-data-schema-session>Relationship to aind-data-schema Session<a class=headerlink href=#relationship-to-aind-data-schema-session title="Permanent link">&para;</a></h3> <p>Power configurations and frame rate(s) are stored in the session.json under the ophys_fovs key within data_streams. Laser configuration and frame rates are recorded for each FOV. In the case of multiplane acquisition, associated pairs are linked under the coupled_fov_index and ROI FOV is recorded under scanimage_roi_index. The index field is used to count how many FOVs were acquired in a single session.</p> <h2 id=primary-data-format>Primary Data Format<a class=headerlink href=#primary-data-format title="Permanent link">&para;</a></h2> <p>Raw movie files are converted to HDF5 files. HDF5 files contain movie from one plane only. Within the HDF5 file, the movie is stored as the <em>data</em> dataset and metadata from the TIFF header are stored as the <em>metadata</em> dataset.</p> <p>The conversion from TIFF to HDF5 happens before upload to cloud. Multiplane data must be de-interleaved into separate planes and saved as HDF5 while single-plane images must be stitched together from the array of TIFFs collected on the rig.</p> <p>Single plane HDF5s with multiple stimulus epochs are annotated using the datasets tiff_stem_location and epoch_location. tiff_stem_location contains the frames associated with each TIFF stem name in the data dataset while the epoch_location records the frames in the dataset associated with each epoch (spontaneous activity, single neuron BCI activity and 2p photostimulation). Single plane HDF5s also contain one TIFF header for each unique, TIFF stem type.</p> <p>To specify a reference image for processing a "reference_image.h5" file must be specified as a virtual, HDF5 dataset in the same directory as the primary data format.</p> <p><strong>Single Plane File Structure</strong></p> <div class=highlight><pre><span></span><code>ðŸ“¦pophys
 â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS.h5
 â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_VDS.h5
 â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_reference_image.h5
 â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_local-stack.h5
 â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_neuron.mat
 â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_correction.csv
 â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_activity.csv
 â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_photostim_power.stim
</code></pre></div> <p><strong>Multiplane File Structure</strong></p> <div class=highlight><pre><span></span><code>ðŸ“¦pophys
 â”£ ðŸ“‚VISP0_1
 â”ƒ â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS.h5
 â”ƒ â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_averaged_depth.h5
 â”ƒ â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_averaged_surface.h5
 â”ƒ â”— ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_local-stack.h5
 â”£ ðŸ“‚VISP0_2
 â”ƒ â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS.h5
 â”ƒ â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_averaged_depth.h5
 â”ƒ â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_averaged_surface.h5
 â”ƒ â”— ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_local-stack.h5
 â”£ ðŸ“‚VISP0_3
 â”ƒ â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS.h5
 â”ƒ â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_averaged_depth.h5
 â”ƒ â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_averaged_surface.h5
 â”ƒ â”— ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_local-stack.h5
 â”£ ðŸ“‚VISP0_4
 â”ƒ â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS.h5
 â”ƒ â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_averaged_depth.h5
 â”ƒ â”£ ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_averaged_surface.h5
 â”ƒ â”— ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_local-stack.h5
 â”— ðŸ“œmouse-id_YYYY-MM-DD_HH-MM-SS_cortical-stack1.h5
</code></pre></div> <h3 id=application-notes_1>Application notes<a class=headerlink href=#application-notes_1 title="Permanent link">&para;</a></h3> <p><a href=https://github.com/AllenNeuralDynamics/aind-ophys-mesoscope-image-splitterc>aind-ophys-mesoscope-image-splitter</a></p> <p><a href=https://github.com/AllenNeuralDynamics/aind-ophys-bergamo-stitcher>aind-ophys-bergamo-stitcher</a></p> <h2 id=file-quality-assurance>File Quality Assurance<a class=headerlink href=#file-quality-assurance title="Permanent link">&para;</a></h2> <p>The number of frames in each HDF5 file should match the number of frames in the TIFF files.</p> <p>The acquisition start time and end time should be consistent with the frames acquired at a given frame rate.</p> <h2 id=vocabulary>Vocabulary<a class=headerlink href=#vocabulary title="Permanent link">&para;</a></h2> <p><strong>Single Plane</strong></p> <p>FOV: Field of view of the imaging region. ROI: Region of interest pertaining to conditioned cell.</p> <p><strong>Multiplane</strong></p> <p>FOV: Field of view of the entire brain. ROI: Region of interest pertaining to the plane being imaged.</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="February 10, 2026 15:57:33 UTC">February 10, 2026</span> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> 2025, Allen Institute for Neural Dynamics </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "../..", "features": ["content.tabs.link", "announce.dismiss", "navigation.tabs", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.preview", "navigation.instant.progress", "navigation.path", "navigation.sections", "navigation.top", "navigation.tracking", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.50899def.min.js></script> </body> </html>